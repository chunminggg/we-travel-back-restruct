(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3333fd0e"],{"016f":function(e,t,r){},"326b":function(e,t,r){},"5b17":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"content"},[e.isShowAddPriceView?e._e():r("div",[r("h2",[e._v("产品发布")]),r("Input",{staticClass:"product",attrs:{placeholder:""},model:{value:e.productNumber,callback:function(t){e.productNumber=t},expression:"productNumber"}},[r("span",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("产品编号")])]),r("Input",{staticClass:"product",attrs:{placeholder:""},model:{value:e.productName,callback:function(t){e.productName=t},expression:"productName"}},[r("span",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("产品名称")])]),r("Input",{staticClass:"product",attrs:{placeholder:""},model:{value:e.productPlace,callback:function(t){e.productPlace=t},expression:"productPlace"}},[r("span",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("出发城市")])]),r("Input",{staticClass:"product",attrs:{placeholder:""},model:{value:e.productPrice,callback:function(t){e.productPrice=t},expression:"productPrice"}},[r("span",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("产品价格")])]),r("Input",{staticClass:"product",attrs:{placeholder:""},model:{value:e.productDes,callback:function(t){e.productDes=t},expression:"productDes"}},[r("span",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("产品描述")])]),r("Input",{staticClass:"product",attrs:{placeholder:""},model:{value:e.productStartDate,callback:function(t){e.productStartDate=t},expression:"productStartDate"}},[r("span",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("开始时间")])]),r("div",{staticClass:"product"},[r("Button",{staticClass:"product",attrs:{type:"info"},on:{click:e.priceSelect}},[e._v("进入价格视图")]),r("price-list",{attrs:{tagArray:e.tagArray}}),r("div",{staticClass:"price-card"})],1),r("div",{staticClass:"product"},[r("label",[e._v("是否置顶:")]),r("i-switch",{model:{value:e.isRecommend,callback:function(t){e.isRecommend=t},expression:"isRecommend"}}),r("label",[e._v("是否推荐:")]),r("i-switch",{model:{value:e.isSpecialPrice,callback:function(t){e.isSpecialPrice=t},expression:"isSpecialPrice"}}),r("label",[e._v("是否跟团游")]),r("i-switch",{model:{value:e.isFollowTeam,callback:function(t){e.isFollowTeam=t},expression:"isFollowTeam"}}),r("label",[e._v("是否自由行")]),r("i-switch",{model:{value:e.isFreeTravel,callback:function(t){e.isFreeTravel=t},expression:"isFreeTravel"}})],1),r("Select",{staticClass:"product",attrs:{placeholder:"请选择产品类型"},model:{value:e.productTypeSelected,callback:function(t){e.productTypeSelected=t},expression:"productTypeSelected"}},e._l(e.productTypes,function(t,a){return r("Option",{key:a,attrs:{value:t.value}},[e._v(e._s(t.label))])})),r("Alert",{staticClass:"myAlert",attrs:{type:"warning"}},[e._v("产品详情滚动图（至少传一张)")]),r("image-upload",{staticClass:"product imageUpload",attrs:{uploadList:e.imageArray},on:{"send-image":e.getImageArray}}),e._l(e.richItems,function(t,a){return r("div",{key:a,staticClass:"myProduct"},[r("Alert",[e._v(e._s(t.placeHolder))]),r("rich-editor",{ref:"rich"+a,refInFor:!0,attrs:{idx:a}})],1)}),r("Button",{staticClass:"product",attrs:{type:"success",long:""},on:{click:e.submitData}},[e._v("确认提交")]),r("Button",{staticClass:"product",attrs:{type:"error",long:""},on:{click:e.elseSubmitData}},[e._v("另存为")])],2),e.isShowAddPriceView?r("div",[r("price-view",{ref:"holePriceView",attrs:{tagArray:e.tagArray}})],1):e._e()])},i=[],c=(r("96cf"),r("3040")),s=(r("7f7f"),r("cadf"),r("551c"),r("097d"),r("a1c6")),o=r("1d5f"),n=r("a0f0"),l=(r("3040b"),r("cac2"),r("1e58"),r("b881")),d=r("0e98"),u=r("1172"),p=r("23d5"),m=r.n(p),h=r("99df"),f=r("92fd"),v=r("0eff"),g={components:{imageUpload:s["a"],Editor:n["a"],quillEditor:l["quillEditor"],richEditor:u["a"],priceForm:h["a"],priceView:f["a"],priceList:v["a"]},watch:{isShowAddPriceView:function(e){var t=this;e||this.$nextTick(function(){t.configRichConent()})}},data:function(){return{isShowAddPriceView:!1,richItems:[{content:"",placeHolder:"线路特色"},{content:"",placeHolder:"行程介绍"},{content:"",placeHolder:"费用说明"},{content:"",placeHolder:"预订须知"}],singlePriceComment:"",productId:"",productNumber:"",productName:"",productDes:"",productPrice:"",productPlace:"",productStartDate:"",productEndDate:"",isRecommend:!1,isSpecialPrice:!1,isFollowTeam:!1,isFreeTravel:!1,priceModal:!1,singlePrice:"",singleChildPrice:"",singleDate:"",tagArray:[],dateOption1:{disabledDate:function(e){return e&&e.valueOf()<Date.now()-864e5}},dateOption2:{disabledDate:function(e){return e&&e.valueOf()<Date.now()-864e5}},productTypes:[],productTypeSelected:"",imageArray:[],fileArray:[]}},created:function(){var e=this,t=this;t.productId=this.$route.params.productId,this.getThemeData(),o["a"].getTodoDetail(t.productId,"Product",function(r){t.richItems=r.detailContent,t.productNumber=r.onleyId,t.productPlace=r.place,t.productDes=r.describe,t.productName=r.name,t.productPrice=r.price,t.imageArray=r.imageArray,t.fileArray=r.fileArray,void 0==r.fileArray&&(t.fileArray=[]),t.productStartDate=r.startDate,t.isFollowTeam=r.isFollowTeam||!1,t.isFreeTravel=r.isFreeTravel||!1,t.tagArray=r.tagArray||[],void 0!=r.isRecommend&&(t.isRecommend=r.isRecommend),void 0!=r.isSpecialPrice&&(t.isSpecialPrice=r.isSpecialPrice),t.productTypeSelected=r.type,e.configRichConent()},function(e){t.$Message.error("获取信息失败,请重试")})},methods:{handleEditPrice:function(e){this.$refs.priceForm.configData(e)},configRichConent:function(){var e=this;this.richItems.map(function(t,r){e.$refs["rich".concat(r)][0].htmlText=t.content})},getThemeData:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(d["n"])();case 2:t=e.sent,this.productTypes=t.map(function(e){return{value:e.id,label:e.attributes.name}});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),handleClose:function(e){this.tagArray.splice(e,1)},priceAdd:function(){var e={startDate:m()(this.singleDate[0]).format("YYYY-MM-DD"),endDate:m()(this.singleDate[1]).format("YYYY-MM-DD"),price:this.singlePrice,childPrice:this.singleChildPrice,comment:this.singlePriceComment};this.tagArray.push(e)},priceEdit:function(e,t){var r={startDate:m()(e.dateRange[0]).format("YYYY-MM-DD"),endDate:m()(e.dateRange[1]).format("YYYY-MM-DD"),price:e.price,childPrice:e.childPrice,comment:e.comment};this.$set(this.tagArray,t,r),this.tagArray[t]=r},priceSelect:function(){var e=this;this.isShowAddPriceView=!0,this.getRichContent(),this.formatDateArray(),this.$nextTick(function(){e.$refs.holePriceView.configPriceView()})},getRichTextArray:function(e){this.richItems[e.index].content=e.content},getImageArray:function(e){this.imageArray=e},getFileArray:function(e){this.fileArray=e},getRichContent:function(){var e=this;this.richItems.map(function(t,r){var a=e.$refs["rich".concat(r)][0].htmlText;t.content=a})},formatDateArray:function(){this.tagArray.map(function(e){e.startDate=m()(e.startDate).format("YYYY-MM-DD")})},getNowData:function(){var e=this;this.getRichContent(),this.formatDateArray();var t={startDate:e.productStartDate,name:e.productName,describe:e.productDes,type:e.productTypeSelected,place:e.productPlace,onleyId:e.productNumber,price:e.productPrice,imageArray:e.imageArray,fileArray:e.fileArray,detailContent:e.richItems,isRecommend:e.isRecommend,isSpecialPrice:e.isSpecialPrice,isFollowTeam:e.isFollowTeam,isFreeTravel:e.isFreeTravel,tagArray:e.tagArray};return t},elseSubmitData:function(){var e=this,t=this.getNowData();o["a"].uploadProdut("",t,function(){e.$Message.success("另存为成功"),e.$router.push("/productManage")})},submitData:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t=this.getNowData(),this.imageArray.length||this.$Message.error("请上传图片至少一张"),e.next=5,Object(d["d"])(t);case 5:e.sent,this.$Message.success("新建成功"),this.$nextTick(function(){r.$router.go(0)}),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),this.$Message.warning("操作失败");case 14:case"end":return e.stop()}},e,this,[[0,11]])}));return function(){return e.apply(this,arguments)}}()}},y=g,D=(r("ff0c5"),r("e171"),r("2877")),w=Object(D["a"])(y,a,i,!1,null,"4962d588",null);w.options.__file="count-to.vue";t["default"]=w.exports},e171:function(e,t,r){"use strict";var a=r("326b"),i=r.n(a);i.a},ff0c5:function(e,t,r){"use strict";var a=r("016f"),i=r.n(a);i.a}}]);
//# sourceMappingURL=chunk-3333fd0e.19022a57.js.map