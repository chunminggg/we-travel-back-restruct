(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-93385806"],{"166e":function(e,t,a){},"25e9":function(e,t,a){"use strict";var r=a("166e"),c=a.n(r);c.a},5663:function(e,t,a){},"5b17":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("h2",[e._v("产品发布")]),a("Input",{staticClass:"product",attrs:{placeholder:""},model:{value:e.productNumber,callback:function(t){e.productNumber=t},expression:"productNumber"}},[a("span",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("产品编号")])]),a("Input",{staticClass:"product",attrs:{placeholder:""},model:{value:e.productName,callback:function(t){e.productName=t},expression:"productName"}},[a("span",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("产品名称")])]),a("Input",{staticClass:"product",attrs:{placeholder:""},model:{value:e.productPlace,callback:function(t){e.productPlace=t},expression:"productPlace"}},[a("span",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("出发城市")])]),a("Input",{staticClass:"product",attrs:{placeholder:""},model:{value:e.productPrice,callback:function(t){e.productPrice=t},expression:"productPrice"}},[a("span",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("产品价格")])]),a("Input",{staticClass:"product",attrs:{placeholder:""},model:{value:e.productDes,callback:function(t){e.productDes=t},expression:"productDes"}},[a("span",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("产品描述")])]),a("Input",{staticClass:"product",attrs:{placeholder:""},model:{value:e.productStartDate,callback:function(t){e.productStartDate=t},expression:"productStartDate"}},[a("span",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("开始时间")])]),a("div",{staticClass:"product"},[a("Button",{staticClass:"product",attrs:{type:"info"},on:{click:e.priceSelect}},[e._v("价格添加")]),a("div",{staticClass:"price-card"},[a("Row",{attrs:{gutter:16}},e._l(e.tagArray,function(t,r){return a("Col",{key:r,attrs:{span:"6"}},[a("Card",[a("a",{attrs:{slot:"extra",href:"#"},on:{click:function(t){t.preventDefault(),e.handClose(r)}},slot:"extra"},[a("Icon",{attrs:{type:"ios-loop-strong"}}),e._v("\n          删除\n      ")],1),a("div",[e._v("\n          成人票价:"+e._s(t.price)+"\n        ")]),a("div",[e._v("\n          儿童票价:"+e._s(t.childPrice)+"\n        ")]),a("div",[a("div",[e._v("开始日期："+e._s(t.startDate))]),a("div",[e._v("结束日期："+e._s(t.endDate))])])])],1)}))],1)],1),a("div",{staticClass:"product"},[a("label",[e._v("是否置顶:")]),a("i-switch",{model:{value:e.isRecommend,callback:function(t){e.isRecommend=t},expression:"isRecommend"}})],1),a("Select",{staticClass:"product",attrs:{placeholder:"请选择产品类型"},model:{value:e.productTypeSelected,callback:function(t){e.productTypeSelected=t},expression:"productTypeSelected"}},e._l(e.productTypes,function(t,r){return a("Option",{key:r,attrs:{value:t.value}},[e._v(e._s(t.label))])})),a("Alert",{staticClass:"myAlert",attrs:{type:"warning"}},[e._v("产品详情滚动图（至少传一张)")]),a("image-upload",{staticClass:"product imageUpload",attrs:{uploadList:e.imageArray},on:{"send-image":e.getImageArray}}),e._l(e.richItems,function(t,r){return a("div",{key:r,staticClass:"myProduct"},[a("Alert",[e._v(e._s(t.placeHolder))]),a("quill-editor",{model:{value:t.content,callback:function(a){e.$set(t,"content",a)},expression:"richItem.content"}})],1)}),a("Button",{staticClass:"product",attrs:{type:"success",long:""},on:{click:e.submitData}},[e._v("确认提交")]),a("Button",{staticClass:"product",attrs:{type:"error",long:""},on:{click:e.elseSubmitData}},[e._v("另存为")]),a("Modal",{attrs:{title:"价格添加"},on:{"on-ok":e.priceAdd},model:{value:e.priceModal,callback:function(t){e.priceModal=t},expression:"priceModal"}},[a("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入成人价格"},model:{value:e.singlePrice,callback:function(t){e.singlePrice=t},expression:"singlePrice"}}),a("Input",{staticClass:"product",staticStyle:{width:"300px"},attrs:{placeholder:"请输入儿童价格"},model:{value:e.singleChildPrice,callback:function(t){e.singleChildPrice=t},expression:"singleChildPrice"}}),a("DatePicker",{staticClass:"product",staticStyle:{width:"300px"},attrs:{placeholder:"选择日期",type:"daterange"},model:{value:e.singleDate,callback:function(t){e.singleDate=t},expression:"singleDate"}})],1)],2)},c=[],i=(a("b5aa"),a("4aee")),s=(a("cf54"),a("3a0f"),a("a3a3"),a("4d0b"),a("a1c6")),l=a("1d5f"),n=a("a0f0"),o=(a("3040"),a("cac2"),a("1e58"),a("b881")),u=a("0e98"),p=a("23d5"),d=a.n(p),m={components:{imageUpload:s["a"],Editor:n["a"],quillEditor:o["quillEditor"]},data:function(){return{richItems:[{content:"",placeHolder:"线路特色"},{content:"",placeHolder:"行程介绍"},{content:"",placeHolder:"费用说明"},{content:"",placeHolder:"预订须知"}],productId:"",productNumber:"",productName:"",productDes:"",productPrice:"",productPlace:"",productStartDate:"",productEndDate:"",isRecommend:!1,isSpecialPrice:!1,isFollowTeam:!1,isFreeTravel:!1,priceModal:!1,singlePrice:"",singleChildPrice:"",singleDate:"",tagArray:[],dateOption1:{disabledDate:function(e){return e&&e.valueOf()<Date.now()-864e5}},dateOption2:{disabledDate:function(e){return e&&e.valueOf()<Date.now()-864e5}},productTypes:[{value:1,label:"巴厘岛"},{value:2,label:"沙巴岛"},{value:3,label:"芽庄"},{value:4,label:"马尔代夫"},{value:5,label:"普吉岛"},{value:6,label:"长滩岛"},{value:7,label:"帕劳"},{value:8,label:"大溪地"},{value:9,label:"苏梅岛"}],productTypeSelected:"",imageArray:[],fileArray:[]}},created:function(){var e=this;e.productId=this.$route.params.productId,this.getThemeData(),l["a"].getTodoDetail(e.productId,"Product",function(t){e.richItems=t.detailContent,e.productNumber=t.onleyId,e.productPlace=t.place,e.productDes=t.describe,e.productName=t.name,e.productPrice=t.price,e.imageArray=t.imageArray,e.fileArray=t.fileArray,void 0==t.fileArray&&(e.fileArray=[]),e.productStartDate=t.startDate,e.isFollowTeam=t.isFollowTeam||!1,e.isFreeTravel=t.isFreeTravel||!1,e.tagArray=t.tagArray||[],void 0!=t.isRecommend&&(e.isRecommend=t.isRecommend),void 0!=t.isSpecialPrice&&(e.isSpecialPrice=t.isSpecialPrice),e.productTypeSelected=t.type},function(t){e.$Message.error("获取信息失败,请重试")})},methods:{getThemeData:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(u["l"])();case 2:t=e.sent,this.productTypes=t.map(function(e){return{value:e.id,label:e.attributes.name}});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),handleClose:function(e){this.tagArray.splice(e,1)},priceAdd:function(){var e={startDate:d()(this.singleDate[0]).format("YYYY-MM-DD"),endDate:d()(this.singleDate[0]).format("YYYY-MM-DD"),price:this.singlePrice,childPrice:this.singleChildPrice};this.tagArray.push(e)},priceSelect:function(){this.priceModal=!0},getRichTextArray:function(e){this.richItems[e.index].content=e.content},getImageArray:function(e){this.imageArray=e},getFileArray:function(e){this.fileArray=e},getNowData:function(){var e=this,t={startDate:e.productStartDate,name:e.productName,describe:e.productDes,type:e.productTypeSelected,place:e.productPlace,onleyId:e.productNumber,price:e.productPrice,imageArray:e.imageArray,fileArray:e.fileArray,detailContent:e.richItems,isRecommend:e.isRecommend,isSpecialPrice:e.isSpecialPrice,isFollowTeam:e.isFollowTeam,isFreeTravel:e.isFreeTravel,tagArray:e.tagArray};return t},elseSubmitData:function(){var e=this,t=this.getNowData();l["a"].uploadProdut("",t,function(){e.$Message.success("另存为成功"),e.$router.push("/productManage")})},submitData:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t=this.getNowData(),this.imageArray.length||this.$Message.error("请上传图片至少一张"),e.next=5,Object(u["c"])(t);case 5:e.sent,this.$Message.success("新建成功"),this.$nextTick(function(){a.$router.go(0)}),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),this.$Message.warning("操作失败");case 13:case"end":return e.stop()}},e,this,[[0,10]])}));return function(){return e.apply(this,arguments)}}()}},v=m,h=(a("25e9"),a("8012"),a("048f")),f=Object(h["a"])(v,r,c,!1,null,"4859ec8c",null);f.options.__file="count-to.vue";t["default"]=f.exports},8012:function(e,t,a){"use strict";var r=a("5663"),c=a.n(r);c.a}}]);
//# sourceMappingURL=chunk-93385806.3728e8c6.js.map